\documentclass[10pt]{beamer}
\usetheme{Hannover}
\useinnertheme{circles}
\usecolortheme{seagull}
\usepackage{palatino}
\usefonttheme{structuresmallcapsserif}

\setbeamercovered{dynamic}

\begin{document}
\title{Rheos}
\subtitle{A Domain-specific language for high-level sampling tasks in
  high-performance computing}
\author[Hardselius \and Almqvist]{Martin Hardselius \and Viktor Almqvist}


% ******************************************************************
% TITLE PAGE
% ******************************************************************
\begin{frame}
  \titlepage
\end{frame}


% ******************************************************************
% TOC
% ******************************************************************
\begin{frame}
\frametitle{Outline}
\pause
\tableofcontents[pausesections]
\end{frame}


% ******************************************************************
% INTRODUCTION
% ******************************************************************
\section{Introduction}
\begin{frame}
\frametitle{Project description}

The aim of our project was to design a suitable input
description-language for Copernicus.

%\begin{itemize}
%\item Increasing need for computational power
%\pause
%\item Grids and cloud computing
%\pause
%\item Many-core systems
%\end{itemize}
\end{frame}


%% **************************************************
%% HIGH-PERFORMANCE COMPUTING
%% **************************************************
%\subsection*{High-performance computing}
%\begin{frame}
%  \frametitle{High-performance computing}
%%  \framesubtitle{High-performance computing}
%  Foo...
%\end{frame}
%
%
%% **************************************************
%% COPERNICUS
%% **************************************************
%\subsection*{Copernicus}
%\begin{frame}
%  \frametitle{Introduction}
%  \framesubtitle{Copernicus}
%  Foo...
%\end{frame}
%
%
%\subsection*{Something else...}
%\begin{frame}
%  \frametitle{Introduction}
%  \framesubtitle{Something else...}
%  ...bar!
%\end{frame}


% ******************************************************************
% RHEOS
% ******************************************************************
\section{Rheos}
\begin{frame}
\frametitle{Rheos}

\begin{itemize}
\pause
\item Descriptive domain-specific language
\pause
\item Flow-based style
%\pause
%\item 
\end{itemize}
\end{frame}


% **************************************************
% DOMAIN-SPECIFIC LANGUAGE
% **************************************************
\subsection*{Domain-specific language}
\begin{frame}
\frametitle{Rheos}
\framesubtitle{A domain-specific langugage}

\begin{itemize}
\pause
\item External DSL
\pause
\item Implemented in Python
\pause
\item No dependencies! Except PLY...
\end{itemize}

\end{frame}


% **************************************************
% SYNTAX
% **************************************************
%\subsection*{Example}
%\begin{frame}
%\frametitle{Language description}
%\framesubtitle{Example code}
%\end{frame}


% **************************************************
% TYPING
% **************************************************
\subsection*{Types}
\begin{frame}[fragile]
\frametitle{Types}
\framesubtitle{Overview}

Rheos is strongly typed and supports \emph{type-parametrized}
components.

\begin{description}
\pause
\item [Components:] $T_{inputs} \times T_{outputs}$
\pause
\item [Primitive types:] \verb|int, float, string, file| and arrays
\pause
\item [Record types:] Components, user defined types, \verb|network|
\end{description}

\pause
\begin{block}{New types}
\begin{verbatim}
type setting (
  int     : i,
  float[] : f
)
\end{verbatim}
\end{block}

\end{frame}


\begin{frame}[fragile]
\frametitle{Types}
\framesubtitle{Type references}

Rheos lets you reference element-types of records.

\pause
\begin{block}{Some record}
\begin{verbatim}
type sometype (
  setting.i  : i,
  setting.f* : f
)
\end{verbatim}
\end{block}

\end{frame}


% **************************************************
% IMPORT STATEMENTS
% **************************************************
\subsection*{Imports and New Types}
\begin{frame}[fragile]
\frametitle{Language description}
\framesubtitle{Import statements}

Rheos supports importing modules.

\pause
\begin{block}{Import statements}
\begin{verbatim}
  import path.to.file
\end{verbatim}
\end{block}

\pause
Right now, each file is its own module.

\end{frame}

% **************************************************
% COMPONENTS
% **************************************************
\subsection*{Components}
\begin{frame}
\frametitle{Language description}
\framesubtitle{Components}

\emph{Components} are the methods or functions of Rheos.\\
\vspace{10pt}
\pause
Two types of components:
\begin{itemize}
\pause
\item Atoms
\pause
\item Networks
\end{itemize}

\end{frame}


% **********************************
% ATOMS
% **********************************
\subsubsection*{Atoms}
\begin{frame}[fragile]
\frametitle{Components}
\framesubtitle{Atoms}

Atoms are \emph{wrappers} for executables.

\pause
\begin{block}{Atom}
\begin{verbatim}
atom python add    ''' a + b = q'''
  in ( float a     '''input a'''
     , float b     '''input b'''
     )
  out ( float q    '''output q'''
      )
  options ( function : builtin.float.add
          , import   : builtin.float )
\end{verbatim}
\end{block}

\pause
Three different kinds of executables:
\begin{enumerate}
\pause
\item \verb|python|
\pause
\item \verb|python-extended|
\pause
\item \verb|external|
\end{enumerate}


\end{frame}


% **********************************
% NETWORKS
% **********************************
\subsubsection*{Networs}
\begin{frame}[fragile]
\frametitle{Components}
\framesubtitle{Networks}

Networks are the components that instantiate and connect other
components.

\pause
\begin{block}{Network}
\begin{verbatim}
network addmul
  in ( float a
     , float b
     , float c )
  out ( float q)
  {
  myAdd =  add(in.a, in.b)
  myMul =  mul(in.c, myAdd.out.q)
  out.q <- myMul.out.q
  }
\end{verbatim}
\end{block}
\end{frame}


\begin{frame}[fragile]
\frametitle{Networks}
\framesubtitle{Network description statements}

So far, we have seen \emph{instantiations} and \emph{connections}.

\pause
\begin{block}{Intantiation}
\verb| myAdd = add(...)|
\end{block}

\pause
\begin{block}{Connection}
\verb|out.q <- myMul.out.q|  
\end{block}

\end{frame}


\begin{frame}[fragile]
\frametitle{Networks}
\framesubtitle{Alternative ways}

There are alternative ways to instantiate components.

\pause
\begin{block}{Network alternative}
\begin{verbatim}
network addmul
  in ( float a
     , float b
     , float c )
  out ( float q)
  {
  myAdd       =  add()
  myAdd.a     <- in.a
  myAdd.b     <- in.b
  myMul       =  mul(in(2))
  myMul.in(1) <- myAdd.out(0)
  out.q       <- myMul.out.q
  }
\end{verbatim}
\end{block}
\end{frame}


\begin{frame}[fragile]
\frametitle{Networks}
\framesubtitle{Implicit instances}

We can even make implicit instances!

\pause
\begin{block}{Implicit instance}
\end{block}
\verb|myAddMul = mul(add(in.a, in.b).out.q, in.c)|
\end{frame}


\begin{frame}[fragile]
\frametitle{Networks}
\framesubtitle{Controllers}

There is a third kind of statement.

\pause
\begin{block}{Controllers}
\begin{verbatim}
...
var = somecontroller(in.settings)
controller(var.in.net, var.out.net)
\end{verbatim}
\end{block}

\pause
Controllers are allowed to alter the internal network.
\vspace{10pt}

\pause
The \verb|controller| statement is associated with the compound type
\verb|network|.

\end{frame}


\subsection*{Type-parametrized components}
\begin{frame}[fragile]
\frametitle{Type-parametrized components}

Components can take types as inputs, \emph{meta types}, to allow for
generic descriptions.

\pause
\begin{block}{Example}
\begin{verbatim}
network net <func f, list l, type t>
  in ( f.in i
     , l inputs )
  out (t[] outputs )
  {
  ...
  }
\end{verbatim}
\end{block}

\pause
\begin{block}{Usage:}
\begin{verbatim}
...
myNet = net <someComp, float[], int> (...)
...
\end{verbatim}
\end{block}
\end{frame}

% ******************************************************************
% CONCLUSIONS
% ******************************************************************
\section{Conclusions}
\begin{frame}
  \frametitle{Rheos}
  %Rheos is awesome!
\end{frame}


\end{document}
